{% extends "base.html" %}

{% block additional_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/forum.css') }}">
{% endblock %}

{% block content %}
    <div class="forum-container">
        <h1>贴吧</h1>
        
        <a href="#" class="new-thread-btn">发新帖</a>
        
        {% for section in sections %}
        <div class="section-card">
            <div class="section-header">
                <h2 class="section-title">{{ section.name }}</h2>
                <a href="{{ url_for('forum_section', section_id=section.id) }}" class="view-all">查看全部</a>
            </div>
            <p class="section-description">{{ section.description }}</p>
            
            <ul class="threads-list">
                {% for thread in section.threads[:5] %}
                <li class="thread-item">
                    <h3 class="thread-title"><a href="{{ url_for('forum_thread', thread_id=thread.id) }}">{{ thread.title }}</a></h3>
                    <div class="thread-meta">
                        <span>作者: {{ thread.user.nickname or thread.user.username }}</span>
                        <span>时间: {{ thread.timestamp.strftime('%Y-%m-%d %H:%M') }}</span>
                        <span>回复: {{ thread.replies.count() }}</span>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endfor %}
    </div>
{% endblock %}