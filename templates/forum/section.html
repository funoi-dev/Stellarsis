{% extends "base.html" %}

{% block additional_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/forum.css') }}">
{% endblock %}

{% block content %}
    <div class="section-container">
        <div class="section-header">
            <h1 class="section-title">{{ section.name }}</h1>
            <p class="section-description">{{ section.description }}</p>
        </div>
        
        <a href="{{ url_for('new_post', section_id=section.id) }}" class="new-thread-btn">发新帖</a>
        
        <ul class="threads-list">
            {% for thread in threads %}
            <li class="thread-item">
                <h3 class="thread-title"><a href="{{ url_for('forum_thread', thread_id=thread.id) }}">{{ thread.title }}</a></h3>
                <div class="thread-meta">
                    <span>作者: {{ thread.user.nickname or thread.user.username }}</span>
                    <span>时间: {{ thread.timestamp.strftime('%Y-%m-%d %H:%M') }}</span>
                    <span>回复: {{ thread.replies.count() }}</span>
                </div>
                <div class="thread-content-preview">
                    {{ thread.content|striptags|truncate(200) }}
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}